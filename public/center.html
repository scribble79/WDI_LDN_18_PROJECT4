<h2>{{ centers.currentCenter.name | uppercase }}</h2>


<section ng-controller="adminsController as admins">
  <div ng-hide="centers.selectedEvent" class="timetable">
    <h3>Timetable</h3>
    <a ui-sref="newEvent({ id: centers.currentCenter._id })" class="btn btn-default" ng-if="admins.isLoggedIn()">Add Event</a>

    <table>
      <tr>
        <td>Monday</td>
        <td>Tuesday</td>
        <td>Wednesday</td>
        <td>Thursday</td>
        <td>Friday</td>
        <td>Saturday</td>
      </tr>
      <tr>
        <td ng-repeat="days in centers.calendar">
          <div ng-repeat="(timeOfDay, events) in days">
            <div class="table-block">
              <label>{{ timeOfDay }}</label>
              <div ng-repeat="event in events" ng-click="centers.selectEvent(event)" class="tablecell" id="{{event._id}}">
                <h4>{{ event.name }}</h4>
                <p class="pcell">{{ event.content }}</p>
                <a ng-click="centers.readMore(event)">Read More</a>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </table>
  </div>
  <div>
  <div ng-show="centers.selectedEvent">
    <form ng-submit="centers.saveEvent()" ng-if="admins.isLoggedIn()">
      <div class="form-group">
        <input ng-model="centers.selectedEvent.name" placeholder="Name" class="form-control">
      </div>
      <div class="form-group">
        <textarea rows="10" ng-model="centers.selectedEvent.content" placeholder="Info" class="form-control"></textarea>
      </div>
      <button class="btn btn-primary">Save</button>
    </form>
    <button class="btn btn-primary" ng-click="centers.deleteEvent()">Delete</button>

    <div ng-if="!admins.isLoggedIn()">
      <h2>{{ centers.selectedEvent.name }}</h2>
      <p>{{ centers.selectedEvent.content }}</p>
    </div>
  </div>

  <div class="map">
    <map center="centers.mapCenter" marker="centers.mapMarker"></map>
  </div>
</section> 